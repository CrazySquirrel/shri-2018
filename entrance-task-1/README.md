# Приложение для создания и редактирования информации о встречах сотрудников

## Запуск
```
npm i
npm start
```

## Тестирование
```
npm test
```

## Сброс БД
```
npm run reset-db
```

## Вступительное слово
Было (не)приятной неожиданностью наличие задания, связанного с серверной частью. С другой стороны - чтобы проверить способность фронтендера сориентироваться в незнакомом стеке нет ничего лучше.
Я не работал с express, graphQL и sequelize, поэтому, несколько раз проанализировав код и исправя пару стилистических недочётов, я приступил к их изучению. Изучаю я, как саранча, оставляя после себя голые поля прочитанных документаций, описаний API и туториалов. Вот с первых я и начал - нужно было понять, что за что отвечает. Разобрался. Выстроил библиотеки в оптимальной  последовательности изучения: sequelize -> express -> graphql. То есть прежде чем настраивать графическую IDE в браузере нужно настроить БД, описать ORM-модели, связать это с сервером и написать ресолверы для запросов.
Я пишу, используя большинство возможностей ES6 вроде деструктуризации, шаблонов строк, стрелочных выражений, классов и др., поэтому я добавил поддержку современных возможностей JS и в первую очередь - поддержку модульной системы импортов и экспортов, куда же без неё.
Когда громоздкие require перестали резать глаз ввиду своего отсутствия, я занялся конфигом sequelize. Сервер всё ещё не запускался, но начинать искать проблему в незнакомом коде "с середины" - рискованно, т.к. можно потерять много времени на "метод тыка". Вместо этого я последовательно пошёл по этапам, исправляя то, что в любом случае пришлось бы исправлять рано или поздно.

## Настройка Sequelize
1. Задаю корректные имя БД, логини пароль для соединения с БД
2. В опциях во время настройки базы разработки включал logging для отладки
3. Добавил промис sequelize.authenticate(), который тестит подключение к базе

## Настройка Express (предварительная)
1. Убираю ненужные импорты, добавляю нужные
2. Захожу на http://localhost:3000/graphql/ - нет маппинга для GET запроса.
2. Добавляю для теста маршрут app.get('/graphql', (req,res) => res.send('Bingo!'))

## Настрока GraphQL
1. Убираю ненужные импорты, добавляю нужные
2. express нам здесь не нужен, мухи - отдельно, котлеты - отдельно.
3. Типы typeDefs - впорядке
4. В резолверах выношу запрос для Event в отдельный файл - для порядка.
5. В query восстанавливаю адекватные наборы аргументов. argumets, {} и произвольный сдвиг результатов для комнат. Когда понял, в чём были ошибки - было ощущение, что надо мной решил посмеяться :) С другой стороны, не разобравшись в GraphQL их нельзя было заметить.
6. В mutation добавил недостающий запрос addUserToEvent()  

## Настройка Express (заключительная)
1. Нашёл библиотеку express-graphql - то, что нужно - установил.
2. Настроил графическую IDE для адреса /graphql:
  - добавил GraphQL схему;
  - graphiql: true, чтобы, собственно, запросы отображались в графической IDE;
  - pretty: true, чтобы JSON-ответы форматировались в удобный вид.
3. Добавил роут с титульником для корневого адреса /
4. Отслеживаем все соединения для 3000-го порта благодаря методу app.listen()